Correctifs Chat â€” Focus, Upload & UI (Mobile-First)
ğŸ¯ Objectif

Corriger le bug de focus : quand on tape dans la zone de saisie, le curseur ne doit plus sauter vers le bouton de tÃ©lÃ©versement.

Nettoyer le design de la barre de composition (icÃ´ne piÃ¨ce jointe, zone de drop, champ texte, bouton envoyer).

Garantir une expÃ©rience mobile-first, responsive et accessible.

ğŸ ProblÃ¨mes observÃ©s

Le focus quitte le champ de saisie et se place sur le bouton de tÃ©lÃ©versement.

La zone â€œDrop your files here / browse filesâ€ prend la place et perturbe la frappe.

Alignements et espacements incohÃ©rents, lisibilitÃ© perfectible.

âœ… Correctifs demandÃ©s (fonctionnels & UX)
1) Gestion du focus (prioritÃ©)

Ne jamais auto-focus le champ de tÃ©lÃ©versement (retirer tout autofocus / appel programmatique de focus sur cet Ã©lÃ©ment).

Conserver le focus sur le champ texte dÃ¨s quâ€™un utilisateur commence Ã  taper.

EmpÃªcher tout re-montage de la zone upload qui provoquerait une perte de focus (stabiliser le DOM, pas de remplacement dynamique de nÅ“uds autour du champ de saisie).

Tab order cohÃ©rent : tabindex naturel = (1) piÃ¨ce jointe â†’ (2) champ texte â†’ (3) envoyer.

Ã‰viter que le clic sur le label de lâ€™upload dÃ©place le focus si ce nâ€™est pas lâ€™intention. Lâ€™input fichier reste cachÃ© et cliquable via le label uniquement.

2) Zone de tÃ©lÃ©versement (upload)

Input fichier cachÃ© (display:none), dÃ©clenchÃ© par un bouton/label avec icÃ´ne trombone.

Aucune banniÃ¨re â€œDrop files hereâ€ intrusive par dÃ©faut.

Afficher une zone de drop discrÃ¨te uniquement pendant un drag-over, puis la masquer lorsquâ€™il nâ€™y a plus de drag.

PrÃ©visualisations des fichiers sÃ©lectionnÃ©s (nom + taille + bouton â€œÃ—â€ pour retirer).

Limites : 3 fichiers max, 5 Mo/fichier, types autorisÃ©s : .jpg, .png, .pdf.

3) Barre de composition (layout)

Contenu en ligne (row) :
[ icÃ´ne piÃ¨ce jointe ] [ champ texte flexible ] [ bouton envoyer ]

Mobile-first :

Hauteur de la barre : 56â€“64px, paddings 8â€“12px.

Touch targets â‰¥ 44px.

Bouton envoyer collant en bas de lâ€™Ã©cran sur mobile.

Desktop : largeur max 768â€“960px centrÃ©e; la barre reste claire, sans dÃ©bordements.

Compteur caractÃ¨res (0/2000) alignÃ© Ã  droite, gris discret.

4) Styles & lisibilitÃ©

Police â‰¥ 16px en mobile.

Contraste AA minimum.

Placeholder â€œÃ‰crivez un messageâ€¦â€ gris moyen (pas trop pÃ¢le).

Espacements rÃ©guliers (8/12/16).

IcÃ´nes alignÃ©es verticalement au centre.

5) AccessibilitÃ©

LibellÃ© ARIA pour le bouton piÃ¨ce jointe (â€œJoindre un fichierâ€).

RÃ´le â€œbuttonâ€ et aria-pressed non nÃ©cessaire (action ponctuelle).

Annoncer via ARIA live quand un fichier est ajoutÃ©/supprimÃ©.

Focus visible (outline) sur tous les Ã©lÃ©ments interactifs.

6) Ã‰tats & erreurs

Lors dâ€™un envoi : bouton envoyer passe en Ã©tat chargement (spinner) + dÃ©sactivÃ©.

Erreurs claires :

â€œType de fichier non autorisÃ©.â€

â€œTaille maximale (5 Mo) dÃ©passÃ©e.â€

â€œVous pouvez ajouter jusquâ€™Ã  3 fichiers.â€

Messages dâ€™erreur sous la barre avec un style discret mais lisible.